/* all questions HTML
	<!DOCTYPE html>
<html lang="en-US">

<head>
<title>Home</title>
<meta charset="UTF-8">
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<!-- Bootstrap imports -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script type="text/javascript" src="main.js"></script>
</head>

<body>
<div ng-app="main">
	<div nav-directive></div>	
	<div class="container">   
		<div ng-controller="allQuestions" ng-init="getTop20Questions(from);showAnswerTextArea=false;showOlderAnswers=false">
	 		<div ng-repeat="question in questions">
          		<hr>
	 			1.Qid:{{question.Qid}}<br>
	 			2.Qtext:{{question.QuestionText}}<br>
          		3.Qvotes:{{question.Qvotes}}<br>
          		4.QTopics:{{question.QTopics}}<br>
          		5.OwnerNickname:{{question.OwnerNickname}}<br>
          		6.Createdlong:{{question.Created}}<br>
          		7.CreatedHuman:{{question.CreatedHuman}}<br>
          		8.QRating:{{question.QRating}}<br>
          		9.Answers:{{question.Answers}}<br>
          		<button id="answer_button-{{$index}}" ng-click="showAnswerTextArea = !showAnswerTextArea ; getAnswerButton($index)" >
          		 {{answer_button}} </button><br>
          		<div data-ng-if="showAnswerTextArea">
	          		<textarea rows="7"   cols="60" placeholder="your Answer?" maxlength="300" ng-model="answerText" required></textarea><br>
	          		<button ng-click="postAnswer(question.Qid,answerText) ; answerText=''">submit Answer</button>
	          		<button ng-click="answerText=''">Clear</button>
          		</div>
          		<button id="older_answers_button-{{$index}}" ng-click="showOlderAnswers = !showOlderAnswers ; getAnswers(question.Qid,showOlderAnswers) ; getOlderAnswersButton($index)" >
          		{{older_answers_button}}</button>
          		<div data-ng-if="showOlderAnswers">
	          		<div ng-repeat="answer in answers">
		          		1.Aid:{{answer.Aid}}<br>
		          		2.Qid:{{answer.Qid}}<br>
			 			3.AnswerText:{{answer.AnswerText}}<br>
		          		4.OwnerNickname:{{answer.OwnerNickname}}<br>
		          		5.ARating:{{answer.ARating}}<br>
		          		6.Avotes:{{answer.AVotes}}<br>
		          		7.Createdlong:{{answer.Created}}<br>
		          		8.CreatedHuman:{{answer.CreatedHuman}}<br>
	          		</div>
          		</div>
          		<hr>
          		
      		</div>  
	 		<button ng-click="prev()">prev20</button>
            <button ng-click="next()">next20</button>
	 		
	  	</div>
	</div>
</div>
</body>
</html>
*/









/* main.js
//var app = angular.module
/*app.controller('allQuestions', ['$scope', '$http',
                                 function($scope, $http){
	$scope.from = 0;
	$scope.questions = "";
	$scope.answers = "";
	$scope.answer_button = "open Answer box";
	$scope.older_answers_button = "show older Answers";
	
	
	$scope.getTop20Questions = function(from)
	{
		
		$http(
				{
					method : 'POST',
					url : 'http://localhost:8080/webGilad/QuestionsServlet/GetTop20',
					params : { top20from: $scope.from},
					headers : {'Content-Type' : 'application/x-www-form-urlencoded'}
				}).success(function(response) 
						{
					if (response == 0) //0 for no questions found
					{
						alert('no Questions found');
					} 
					else 
					{
						$scope.questions = response;	
					}
						}).error(function(error) {
							alert('somthing happend at getTop20 top20');
							
						});
	}
	
	$scope.prev = function(){
		$scope.from--;
		$scope.getTop20Questions($scope.from);
	}
	$scope.next = function(){
		$scope.from++;
		$scope.getTop20Questions($scope.from);
	}
	$scope.getAnswerButton = function(index)
	{
		var str = "answer_button-" + index;
		var current = document.getElementById(str);
		var inner = current.innerHTML.toString();
		if(inner == "hide Answer box")
		{current.innerHTML = "open Answer box";}
		else
		{current.innerHTML = "hide Answer box";}
		
	}
	$scope.getOlderAnswersButton = function(index)
	{
		var str = "older_answers_button-" + index;
		var current = document.getElementById(str);
		var inner = current.innerHTML.toString();
		if(inner == "hide older Answers")
		{current.innerHTML = "show older Answers";}
		else
		{current.innerHTML = "hide older Answers";}
		
	}
	
	$scope.incQuestionAnswers = function(qid)
	{
		$http(
				{
					method : 'POST',
					url : 'http://localhost:8080/webGilad/QuestionsServlet/incQuestionAnswers',
					params : { qid: qid },
					headers : {'Content-Type' : 'application/x-www-form-urlencoded'}
				}).success(function(response) 
						{
					
						}).error(function(error) {
							alert('somthing happend at inc question answers');
						});
	}
	$scope.postAnswer = function(qid,answerText)
	{
		if(answerText == null || answerText == "")
		{  
			return;
		}
		$http(
				{
					method : 'POST',
					url : 'http://localhost:8080/webGilad/AnswersServlet/PostAnswer',
					params : { answerText: answerText , qid: qid},
					headers : { 'Content-Type' : 'application/x-www-form-urlencoded' }
				}).success(function(response) 
						{
					alert('post answer succeeded');
					$scope.incQuestionAnswers(qid);
					$scope.getTop20Questions($scope.from);
					if (response == 0) 
					{
						
					} 
					else 
					{
						
					}
						}).error(function(error) {
							alert('somthing happend at getNewTop20 top20new');
							
						});
	}
}]);*/


/*app.controller('answerC', ['$scope', '$http',
                            function($scope, $http)
{
            alert('in ansC');                	
    	$scope.getAnswers = function(qid){
    		alert('in ansC'); 
    		$http(
			{
			method : 'POST',
			url : 'http://localhost:8080/webGilad/AnswersServlet/GetAnswers',
			params : { qid: qid },
			headers : {
				'Content-Type' : 'application/x-www-form-urlencoded'
			}
			}).success(function(response) 
			{
				alert('returned from servelet with respons = ' + response);
				if (response == "") {
					
					//send do home page
				} 
				else 
				{
					
				}
			}).error(function(error) {
				alert('somthing happend at post question');
  					
  				});
        		}
  }]);*/
*/











/* question page
	<!DOCTYPE html>
<html lang="en-US">

<head>
<title>Home</title>
<meta charset="UTF-8">
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<!-- Bootstrap imports -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script type="text/javascript" src="js/app.js"></script>
<script type="text/javascript" src="js/controllers/questionPageController.js"></script>
<script type="text/javascript" src="js/controllers/navBarController.js"></script>
<script type="text/javascript" src="js/directives/navBarDirective.js"></script>
</head>

<body>
<div ng-app="main">
	<div nav-directive></div>	
	<div class="container">   
		<div ng-controller="questionPage" ng-init="getQuestionFromSession();getAnswers()">
	 		
	 			<hr>
	 				<h4>here was the title</h4>
          		<hr>
	 			1.Qid:{{question.Qid}}<br>
	 			2.Qtext:{{question.QuestionText}}<br>
          		3.Qvotes:{{question.Qvotes}}<br>
          		4.QTopics:{{question.QTopics}}<br>
          		5.OwnerNickname:{{question.OwnerNickname}}<br>
          		6.Createdlong:{{question.Created}}<br>
          		7.CreatedHuman:{{question.CreatedHuman}}<br>
          		8.QRating:{{question.QRating}}<br>
          		9.Answers:{{question.Answers}}<br>
          		<hr>
      
          		<!--  <button ng-click="getAnswers(question.Qid)" >get ans</button>-->
          		<!-- <div ng-model="getAnswers(question.Qid)"></div> -->
          		
          		<div ng-repeat="answer in answers">
	          		<hr>
          			1.Aid:{{answer.Aid}}<br>
	          		2.Qid:{{answer.Qid}}<br>
		 			3.AnswerText:{{answer.AnswerText}}<br>
	          		4.OwnerNickname:{{answer.OwnerNickname}}<br>
	          		5.ARating:{{answer.ARating}}<br>
	          		6.Avotes:{{answer.AVotes}}<br>
	          		7.Createdlong:{{answer.Created}}<br>
	          		8.CreatedHuman:{{answer.CreatedHuman}}<br>
          		</div>
          		<hr>
          		<textarea rows="7"   cols="60" placeholder="your Answer?" maxlength="300" ng-model="answerText" required></textarea><br>
          		<button ng-click="postAnswer(question.Qid,answerText) ; answerText=''">submit Answer</button>
          		<button ng-click="answerText=''">Clear</button><br>
      	
          		

	 		
	  	</div>
	</div>
</div>

</body>
</html>
	
*/












/* question page controller
	app.controller('questionPage', ['$scope', '$http',function($scope, $http){
	
	$scope.question ="";
	$scope.answerText = "";
	$scope.getQuestionFromSession = function()
	{
		$http(
				{
					method : 'POST',
					url : 'http://localhost:8080/webGilad/QuestionsServlet/GetQuestionFromSession',
					params : {},
					headers : {'Content-Type' : 'application/x-www-form-urlencoded'}
				}).success(function(response) 
					{
					
						if (response == 0) //0 for no questions found
						{
							window.location = "\homePage.html";
							
						} 
						else 
						{
							questions = response;
							$scope.question = questions[0];
						}
						}).error(function(error) {
							alert('somthing happend at get q from session');
							
						});
		}
		$scope.getAnswers = function()
		{
			$http(
					{
						method : 'POST',
						url : 'http://localhost:8080/webGilad/AnswersServlet/GetAnswers',
						params : {},
						headers : { 'Content-Type' : 'application/x-www-form-urlencoded' }
					}).success(function(response) 
						{
						$scope.answers = response;
					
							}).error(function(error) {
								alert('somthing happend at get answers');
								
							});
		}
		$scope.postAnswer = function(qid,answerText)
		{
			if(answerText == null || answerText == "")
			{  
				return;
			}
			$http(
					{
						method : 'POST',
						url : 'http://localhost:8080/webGilad/AnswersServlet/PostAnswer',
						params : { answerText: answerText , qid: qid},
						headers : { 'Content-Type' : 'application/x-www-form-urlencoded' }
					}).success(function(response) 
						{
							$scope.incQuestionAnswers(qid);
							$scope.question.Answers++;
							$scope.getAnswers();
							if (response == 0) 
							{
								
							} 
							else 
							{
												
							}
						}).error(function(error) {
							alert('somthing happend at post answer QPage');
							
						});
		}
		$scope.incQuestionAnswers = function(qid)
		{
			$http(
					{
						method : 'POST',
						url : 'http://localhost:8080/webGilad/QuestionsServlet/incQuestionAnswers',
						params : { qid: qid },
						headers : {'Content-Type' : 'application/x-www-form-urlencoded'}
					}).success(function(response) 
							{
						
							}).error(function(error) {
								alert('somthing happend at inc question answers');
							});
		}
	
		


}]);
*/












/* random stuff

*/
/* main.js

*/